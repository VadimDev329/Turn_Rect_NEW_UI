{"version":3,"sources":["file:///D:/ENGINES/Cocos/PROJECTS/103_2/387/ST/Rect/Turn_Rect/assets/resources/scripts/Game_Turn4.ts"],"names":["_decorator","Component","Graphics","Node","Rect","Label","resources","Sprite","SpriteFrame","Vec3","EventTarget","math","eventTarget","ccclass","property","Game","type","dataS","row","col","angle","url","count","score","s","onLoad","load","err","image","console","log","cut_out4","node","on","EventType","TOUCH_START","onTouchStart","start","cut_out","sprf","sprite","height_rect","originalSize","height","width_rect","width","spr","i","j","clone","rect","addComponent","addChild","spriteFrame","cut_out2","height_image","width_image","x","y","m","sprite2","String","setPosition","randomRangeInt","setRotationFromEuler","event","cut_out3","id","grid_pos","pos","set","name","draw_grid","g","getComponent","lineWidth","moveTo","lineTo","stroke","target","split","game_victory2","go","children","game_state","string"],"mappings":"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","sourcesContent":["import { _decorator, Component, Graphics, Node, Rect, rect, JsonAsset, Scheduler, Label, resources, Sprite, SpriteFrame, Vec2, Vec3, EventTarget,  Event, Input, input, math} from 'cc';\r\nconst eventTarget = new EventTarget(); \r\nconst { ccclass, property } = _decorator;\r\n\r\ninterface ICoverData {\r\n\r\n    id:string;\r\n    grid_pos:Vec3;\r\n    pos:Vec3;\r\n    angle:number;\r\n}\r\n\r\n@ccclass('Game')\r\nexport class Game extends Component {\r\n\r\n    @property({type: Label})\r\n    public scoreX: Label|null = null; // Для вывода\r\n    \r\n    @property({type: Label})\r\n    public timer: Label|null = null; // Для вывода текста \"Game Over\"\r\n    \r\n    @property({type: Label})\r\n    public game_state: Label|null = null; // Для вывода текста \"Game Over\"\r\n\r\n    private dataS:ICoverData[][] = [];\r\n\r\n    private row: number = 6; // Количество строк сетки                \r\n    private col: number = 6; // Количество колонок сетки\r\n   // private height: number = 0; // Высота прямоугольника\r\n   // private width: number = 0; //  Ширина прямоугольника\r\n\r\n   // private sprite: Sprite[][] = []; // Пазлы/Прямоугольники\r\n    private angle: number[][] = []; // Углы на которые повёрнуты соответсвующие прямоугольники\r\n   // private grid_pos: Vec3[][] = []; // Сетка конечных позиций Пазлов/Прямоугольников\r\n\r\n    private url: string = \"images/\"; // Адрес \"картинок\"\r\n\r\n    private count: number = 80; // Таймер\r\n    private score: number = 0; // this.col * this.row;\r\n\r\n    private s:string = \"id = 10\";\r\n   \r\n    onLoad() {\r\n      \r\n        \r\n       \r\n        //----------------------------------------------------------------------------------------------------------------\r\n        resources.load('images/110/spriteFrame', SpriteFrame, (err, image) => {\r\n\r\n            if (err) {\r\n                console.log(err);\r\n            }\r\n\r\n            this.cut_out4(image);\r\n          //  console.log(this.node);\r\n        \r\n         \r\n        });\r\n        this.node.on(Node.EventType.TOUCH_START, this.onTouchStart, this); // Регистрация события \"родителя\" this.node\r\n      \r\n    }\r\n    \r\n    start(){\r\n\r\n     \r\n    }\r\n   \r\n     /* private row: number = 6; // Количество строк сетки                \r\n    private col: number = 6; // Количество колонок сетки\r\n    private height: number = 80; // Высота прямоугольника\r\n    private width: number = 80; //  Ширина прямоугольника */\r\n    cut_out(sprf:SpriteFrame, sprite:Sprite[][], row: number, col: number){\r\n\r\n        let height_rect: number = sprf.originalSize.height/col;\r\n        let width_rect: number = sprf.originalSize.width/row; \r\n        let spr:SpriteFrame = new SpriteFrame();\r\n\r\n        for (let i = 0; i < row; i++) {\r\n            for (let j = 0; j < col; j++) {\r\n\r\n            spr = sprf.clone();\r\n\r\n            spr.rect = new Rect(j*width_rect,i*height_rect,width_rect,height_rect);\r\n\r\n            sprite[i] = [];\r\n        \r\n            sprite[i][j] = new Node(\"New Sprite\").addComponent(Sprite);\r\n       \r\n            this.node.addChild(sprite[i][j].node);\r\n\r\n            sprite[i][j].spriteFrame = spr;\r\n       \r\n            sprite[i][j].addComponent(\"TouchDragger\");\r\n        \r\n            }\r\n        }\r\n       \r\n    }\r\n\r\n    cut_out2(sprf:SpriteFrame){\r\n\r\n        let height_image: number = sprf.originalSize.height;\r\n        let width_image: number = sprf.originalSize.width; \r\n        let height_rect: number = height_image/this.col;\r\n        let width_rect: number = width_image/this.row;\r\n        let x:number = 0; \r\n        let y:number = 0;\r\n        let m:number = 0; // Математический результат (random)\r\n\r\n        let spr:SpriteFrame = new SpriteFrame();\r\n        let sprite2:Sprite = null;\r\n        for (let i = 0; i < this.row; i++) {\r\n            for (let j = 0; j < this.col; j++) {\r\n\r\n            spr = sprf.clone();\r\n\r\n            spr.rect = new Rect(j*width_rect,i*height_rect,width_rect,height_rect);\r\n\r\n            sprite2 = new Node(\"Sprite\"+String(i*j)).addComponent(Sprite);\r\n       \r\n            this.node.addChild(sprite2.node);\r\n\r\n            sprite2.spriteFrame = spr;\r\n            //----------------Position----------------------------------------------\r\n            y = height_rect * i - height_image/2 + height_rect/2;\r\n            x = width_rect * j - width_image/2 + width_rect/2;\r\n\r\n            sprite2.node.setPosition(x,y*-1,0);\r\n           //-----------------------------------------------------------------------\r\n           //-----------------Angle-------------------------------------------------\r\n           m = math.randomRangeInt(0,360); // Случайное число в диапазоне 0 - 360(целые числа)\r\n           if(m>0 && m<=90) m = 90; // Выбор одного из 4 значений\r\n           if(m>90 && m<=180) m = 180;\r\n           if(m>180 && m<=270) m = 270;\r\n           if(m>270 && m<=360) m = 0;\r\n           this.angle[i] = [];\r\n           this.angle[i][j] = m; // Запись в массив \r\n           sprite2.node.setRotationFromEuler(0,0,m); // Поворот \"piece\"\r\n           //------------------Event------------------------------------------------\r\n           sprite2.node.on(Node.EventType.TOUCH_START, (event:any) => {}, this); // // Регистрация события \"детей\"\r\n\r\n           //-----------------------------------------------------------------------\r\n           // sprite2.addComponent(\"TouchDragger\");\r\n        \r\n            }\r\n        } \r\n       // console.log('this.node.children[0].angle = '+this.node.children[0].angle);       \r\n    }\r\n\r\n    cut_out3(sprf:SpriteFrame){\r\n\r\n        let height_image: number = sprf.originalSize.height;\r\n        let width_image: number = sprf.originalSize.width; \r\n        let height_rect: number = height_image/this.col;\r\n        let width_rect: number = width_image/this.row;\r\n        let x:number = 0; \r\n        let y:number = 0;\r\n        let m:number = 0; // Математический результат (random)\r\n        let id:number =0;\r\n\r\n        let spr:SpriteFrame = new SpriteFrame();\r\n        let sprite2:Sprite = null;\r\n        for (let i = 0; i < this.row; i++) {\r\n            for (let j = 0; j < this.col; j++) {\r\n\r\n            spr = sprf.clone();\r\n\r\n            spr.rect = new Rect(j*width_rect,i*height_rect,width_rect,height_rect);\r\n\r\n            sprite2 = new Node(\"Sprite\"+String(i*j)).addComponent(Sprite);\r\n       \r\n            this.node.addChild(sprite2.node);\r\n\r\n            sprite2.spriteFrame = spr;\r\n            //----------------Position----------------------------------------------\r\n            y = height_rect * i - height_image/2 + height_rect/2;\r\n            x = width_rect * j - width_image/2 + width_rect/2;\r\n\r\n            sprite2.node.setPosition(x,y*-1,0);\r\n           //-----------------------------------------------------------------------\r\n           //-----------------Angle-------------------------------------------------\r\n           m = math.randomRangeInt(0,360); // Случайное число в диапазоне 0 - 360(целые числа)\r\n           if(m>0 && m<=90) m = 90; // Выбор одного из 4 значений\r\n           if(m>90 && m<=180) m = 180;\r\n           if(m>180 && m<=270) m = 270;\r\n           if(m>270 && m<=360) m = 0;\r\n           sprite2.node.setRotationFromEuler(0,0,m); // Поворот \"piece\"\r\n           //-------------------------------------------------------------------------\r\n           //-----------------Data----------------------------------------------------\r\n           this.dataS[0] = [];\r\n           this.dataS[0][0] = {id:'', grid_pos:new Vec3(0,0,0), angle: 0, pos: new Vec3(0,0,0)};\r\n           this.dataS[0][0].id = String(id++);\r\n           this.dataS[0][0].grid_pos.set(j,i);\r\n           this.dataS[0][0].angle = m;\r\n           this.dataS[0][0].pos.set(x,y);\r\n           console.log(this.dataS[0][0]); \r\n\r\n          // this.angle[i] = [];\r\n          // this.angle[i][j] = m; // Запись в массив \r\n          \r\n           //------------------Event------------------------------------------------\r\n           sprite2.node.on(Node.EventType.TOUCH_START, (event:any) => {}, this); // // Регистрация события \"детей\"\r\n\r\n           //-----------------------------------------------------------------------\r\n           // sprite2.addComponent(\"TouchDragger\");\r\n        \r\n            }\r\n        } \r\n       // console.log('this.node.children[0].angle = '+this.node.children[0].angle);       \r\n    }\r\n\r\n    cut_out4(sprf:SpriteFrame){\r\n\r\n        let height_image: number = sprf.originalSize.height;\r\n        let width_image: number = sprf.originalSize.width; \r\n        let height_rect: number = height_image/this.col;\r\n        let width_rect: number = width_image/this.row;\r\n        let x:number = 0; \r\n        let y:number = 0;\r\n        let m:number = 0; // Математический результат (random)\r\n        let id:number =0;\r\n\r\n        let spr:SpriteFrame = new SpriteFrame();\r\n        let sprite2:Sprite = null;\r\n        for (let i = 0; i < this.row; i++) {\r\n            for (let j = 0; j < this.col; j++) {\r\n\r\n            spr = sprf.clone();\r\n\r\n            spr.rect = new Rect(j*width_rect,i*height_rect,width_rect,height_rect);\r\n\r\n            sprite2 = new Node(\"Sprite\"+String(i*j)).addComponent(Sprite);\r\n       \r\n            this.node.addChild(sprite2.node);\r\n\r\n            sprite2.spriteFrame = spr;\r\n            //----------------Position----------------------------------------------\r\n            y = height_rect * i - height_image/2 + height_rect/2;\r\n            x = width_rect * j - width_image/2 + width_rect/2;\r\n\r\n            sprite2.node.setPosition(x,y*-1,0);\r\n           //-----------------------------------------------------------------------\r\n           //-----------------Angle-------------------------------------------------\r\n           m = math.randomRangeInt(0,360); // Случайное число в диапазоне 0 - 360(целые числа)\r\n           if(m>0 && m<=90) m = 90; // Выбор одного из 4 значений\r\n           if(m>90 && m<=180) m = 180;\r\n           if(m>180 && m<=270) m = 270;\r\n           if(m>270 && m<=360) m = 0;\r\n           sprite2.node.setRotationFromEuler(0,0,m); // Поворот \"piece\"\r\n           //-------------------------------------------------------------------------\r\n           //-----------------Data----------------------------------------------------\r\n           \r\n           sprite2.node.name = String(x)+\" \"+String(y)+\" \"+String(m);\r\n           console.log('sprite2.node.name = '+sprite2.node.name);\r\n          \r\n           //------------------Event------------------------------------------------\r\n           sprite2.node.on(Node.EventType.TOUCH_START, (event:any) => {}, this); // // Регистрация события \"детей\"\r\n\r\n           //-----------------------------------------------------------------------\r\n           // sprite2.addComponent(\"TouchDragger\");\r\n        \r\n            }\r\n        } \r\n       // console.log('this.node.children[0].angle = '+this.node.children[0].angle);       \r\n    }\r\n\r\n    draw_grid( row: number, col: number, height: number, width: number){ // Нарисовать сетку\r\n             //строка,      колонка,     высота,         ширина        \r\n        let x:number = 0;\r\n        let y:number = 0;   \r\n        const g = this.getComponent(Graphics);\r\n        g.lineWidth = 3;\r\n        for(let i: number = 0; i < row+1; i++){ // Вертикальные линии\r\n        g.moveTo(0,y);\r\n        g.lineTo(width*col,y);\r\n        y = y + height;\r\n        }\r\n        x=0;\r\n        y=0;\r\n        for(let i: number = 0; i < col+1; i++){ // Горизонтальные линии\r\n        g.moveTo(x,0);\r\n        g.lineTo(x,height*row);\r\n        x = x + width;\r\n        }\r\n        g.stroke();\r\n    } \r\n  \r\n     \r\n     onTouchStart(event:any){ // Обработка события (клик по целевой ноде)\r\n       // event.propagationStopped = true; // Остановка распространения события.\r\n       // event.preventSwallow = true; // \"События проникающие в сиситему\"\r\n       // let name:number = Number(event.target.name); // Имя(номер по порядку)\"piece\"\r\n       // this.angle[name] = this.angle[name] + 90; // Против часовой стрелки\r\n       // if(this.angle[name] == 360) this.angle[name] = 0; // 360 = 0;\r\n       // this.sprite[name].node.setRotationFromEuler(0,0,this.angle[name]); // Поворот \"piece\"\r\n        //let angle:\r\n        //----------------------------------------------------------------------------------------\r\n        /* this.node.name = \"300.66998 29298 2374230.43\";\r\n        console.log(this.node);\r\n        console.log(this.s);\r\n        var str = \"50ml+$100\";\r\n        var a = str.split('+')[0]; // 50ml\r\n        var b = str.split('+')[1]; // $100 \r\n\r\n        console.log(a);\r\n        console.log(b);\r\n        \r\n        a = this.node.name.split(' ')[0]; // 50ml\r\n        b = this.node.name.split(' ')[1]; // $100 \r\n        var c = this.node.name.split(' ')[2]; // 50ml\r\n         \r\n        console.log(a);\r\n        console.log(b);\r\n        console.log(c); */\r\n        //---------------------------------------------------------------------------------------\r\n        let x = event.target.name.split(' ')[0]; //\r\n        let y = event.target.name.split(' ')[1]; // \r\n        let angle = this.node.name.split(' ')[2]; // \r\n\r\n        event.target.angle+=90;\r\n        if(event.target.angle == 360) event.target.angle = 0;\r\n        console.log('event.target.name1'+event.target.name);\r\n        event.target.name = x+\" \"+y+\" \"+String(event.target.angle);\r\n        console.log('event.target.name2'+event.target.name);\r\n\r\n        this.game_victory2();\r\n       // console.log('event.target.node.angle = '+event.target.name);\r\n\r\n       // console.log('event.target.node.angle = '+event.target.angle);\r\n       // console.log(this.node.children);\r\n\r\n       // event.target.node.setRotationFromEuler(0,0,this.angle[name]); // Поворот \"piece\"\r\n       // this.game_victory(); // Проверка окончания игры - Победа\r\n       // if (this.scoreX) this.scoreX.string = \"Score \" + this.score;\r\n       // event.propagationStopped = false; // Отменить остановку распространения события.\r\n       \r\n      // this.initS();\r\n       // this.sprite[30].node.setPosition(650,300,0);\r\n       //-------------------------------------------------------------------------------------\r\n      // this.jbjs[0].name = null;\r\n      // this.jbjs[0].angle = null;\r\n      // this.jbjs[0].pos = null;\r\n       //this.jbjs[0] = null;\r\n       //this.jbjs[0].name\r\n     //  this.dataS[0] = [];\r\n     //  this.dataS[0][0] = {id:'', grid_pos:new Vec3(0,0,0), angle: 0, pos: new Vec3(0,0,0)};\r\n      // this.dataS[0][0].id = 'Vadim Molodec';\r\n      // this.dataS[0][0].grid_pos.set(300,300);\r\n     //  this.dataS[0][0].angle = 900;\r\n      // this.dataS[0][0].pos.set(200,300);\r\n      // console.log(this.dataS[0][0]); \r\n       //-------------------------------------------------------------------------------------\r\n       \r\n    } \r\n   \r\n    /* _timer(){ // Таймер\r\n        this.count--; // Обратный счет;\r\n        if (this.timer) this.timer.string = \"TIME \" + String(this.count); // Отображение оставшегося времени \r\n          if(this.count==0){ // Если время истекло\r\n            this.game_over(); // Конец игры\r\n            this.unschedule(this._timer); // Остановка таймера\r\n        }     \r\n    } */\r\n    /* _score(){\r\n        let go:number = 0;\r\n        for (let i = 0; i < this.col*this.row; i++) { // Количество колонок сетки на количество строк сетки = количество \"pieces\"\r\n        if(this.angle[i]==0) go++;\r\n        this.score = go;  \r\n        }\r\n        if (this.scoreX) this.scoreX.string = \"Score \" + this.score;\r\n    } */\r\n    /*  game_victory(){ // Проверка окончания игры\r\n        this._score();\r\n        if(this.score == 36){ // Если все углы равны нулю.\r\n            this.onDestroy();\r\n            if (this.game_state) this.game_state.string = \"Victory!\";\r\n            this.unschedule(this._timer); // Остановка таймера\r\n        } \r\n    }  */\r\n    game_victory2(){\r\n        let go:number = 0;\r\n        for (let i = 0; i < this.col*this.row; i++) { // Количество колонок сетки на количество строк сетки = количество \"pieces\"\r\n        if(this.node.children[i].angle == 0) go++;\r\n        //this.score = go;\r\n        if(go == this.col*this.row) this.game_state.string = \"Victory!\";   \r\n        }\r\n       \r\n    }    \r\n   /*  game_over(){ // Конец игры - неудача\r\n        this.onDestroy(); // Обнулить слушателей событий\r\n        if (this.game_state) this.game_state.string = \"Game Over\"; \r\n    } */\r\n   /*  onDestroy (){\r\n        this.node.off(Input.EventType.TOUCH_START, this.onTouchStart, this);\r\n        for (let i = 0; i < this.col*this.row; i++){\r\n         this.sprite[i].node.off(Node.EventType.TOUCH_START, (event) => {}, this);\r\n        } \r\n    } */\r\n    /* update(){\r\n        this.cut_out2(this.sprite3.spriteFrame,this.row,this.col);\r\n    } */\r\n}"]}