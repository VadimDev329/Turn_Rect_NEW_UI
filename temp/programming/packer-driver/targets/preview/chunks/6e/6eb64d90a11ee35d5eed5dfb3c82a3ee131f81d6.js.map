{"version":3,"sources":["file:///D:/ENGINES/Cocos/PROJECTS/103_2/387/ST/NEW/Rect/Turn_Rect/assets/resources/scripts/Game_Turn.ts"],"names":["_decorator","Component","Graphics","Node","Rect","Label","resources","Sprite","SpriteFrame","Vec3","EventTarget","Input","math","eventTarget","ccclass","property","Game","type","spriteN2","row","col","height","width","sprite","angle","grid_pos","url","count","score","onLoad","load","finish","total","item","console","log","err","spriteFrame","cut_out","start","sprf","spr","i","j","clone","rect","addComponent","node","getParent","addChild","setPosition","draw_grid","x","y","g","getComponent","lineWidth","moveTo","lineTo","stroke","find_target_pos","a","create_sprites","url2","m","String","error","image","randomRangeInt","setRotationFromEuler","on","EventType","TOUCH_START","event","create_sprites2","setTimeout","initS","_score","onTouchStart","name","Number","target","game_victory","scoreX","string","_timer","timer","game_over","unschedule","go","onDestroy","game_state","off"],"mappings":"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","sourcesContent":["import { _decorator, Component, Graphics, Node, Rect, rect, Scheduler, Label, resources, Sprite, SpriteFrame, Vec2, Vec3, EventTarget,  Event, Input, input, math} from 'cc';\nconst eventTarget = new EventTarget(); \nconst { ccclass, property } = _decorator;\n\n@ccclass('Game')\nexport class Game extends Component {\n\n    @property({type: Label})\n    public scoreX: Label|null = null; // Для вывода\n    \n    @property({type: Label})\n    public timer: Label|null = null; // Для вывода текста \"Game Over\"\n    \n    @property({type: Label})\n    public game_state: Label|null = null; // Для вывода текста \"Game Over\"\n\n    @property(Sprite)\n    sprite2: Sprite = null;\n  \n    protected spriteN2: Sprite[][] = [];\n\n    private row: number = 6; // Количество строк сетки                \n    private col: number = 6; // Количество колонок сетки\n    private height: number = 80; // Высота прямоугольника\n    private width: number = 80; //  Ширина прямоугольника\n\n    private sprite: Sprite[] = []; // Пазлы/Прямоугольники\n    private angle: number[] = []; // Углы на которые повёрнуты соответсвующие прямоугольники\n    private grid_pos: Vec3[] = []; // Сетка конечных позиций Пазлов/Прямоугольников\n\n    private url: string = \"images/\"; // Адрес \"картинок\"\n\n    private count: number = 80; // Таймер\n    private score: number = 0; // this.col * this.row;\n    \n    onLoad() {\n       // this.node.on(Node.EventType.TOUCH_START, this.onTouchStart, this); // Регистрация события \"родителя\" this.node\n      //  this.schedule(this._timer,1); //1,3\n       // this.draw_grid(6,6,80,80); // Нарисовать сетку\n      //  this.find_target_pos(); // Найти целевые позиции\n      //  this.create_sprites2(this.url); // Создать \"pieces\"\n       // this.initS();\n        \n       // setTimeout(()=>{this._score(); }, 500);\n       // this._score();\n       //----------------------------------------------------------------------------------------------------------------\n       //resources.preload('image/1/spriteFrame', SpriteFrame);\n       // wait for while\n      // console.log()\n       resources.load('images/1/spriteFrame', SpriteFrame, (finish,total,item)=>{console.log('finish = '+finish); console.log('total = '+total);console.log('item = '+item);}, (err, spriteFrame) => {\n      // this.node.getComponent(Sprite).spriteFrame = spriteFrame;\n      // console.log(String(onprogress));\n       \n         });\n       //----------------------------------------------------------------------------------------------------------------\n        resources.load('images/image/spriteFrame', SpriteFrame, (err, spriteFrame) => {\n       \n            this.cut_out(spriteFrame);\n         \n        });\n\n           \n\n       //----------------------------------------------------------------------------------------------------------------\n    }\n    \n    start(){\n        \n        /* this.draw_grid(6,6,80,80); // Нарисовать сетку\n        this.find_target_pos(); // Найти целевые позиции\n        this.create_sprites(this.url); // Создать \"pieces\"  */\n       // this._score();\n       // console.log('score = '+this.score);\n       // console.log('angle = '+ this.angle[0]);\n    }\n\n   /*  cut_out(){\n        let spr:SpriteFrame = new SpriteFrame();\n\n        for (let i = 0; i < 6; i++) {\n            for (let j = 0; j < 6; j++) {\n\n            spr = this.sprite.spriteFrame.clone(); \n      \n            spr.rect = new Rect(j*80,i*80,80,80);\n        \n            this.spriteN2[i*j] = new Node(\"New Sprite\").addComponent(Sprite);\n       \n            this.node.getParent().addChild(this.spriteN2[i*j].node);\n\n            this.spriteN2[i*j].spriteFrame = spr;\n       \n            this.spriteN2[i*j].node.setPosition(j*80-440, (i*80-280)*-1, 0);\n        \n            this.spriteN2[i*j].addComponent(\"TouchDragger\");\n        \n            }\n        }      \n    } */\n    cut_out(sprf:SpriteFrame){\n        let spr:SpriteFrame = new SpriteFrame();\n\n        for (let i = 0; i < 6; i++) {\n            for (let j = 0; j < 6; j++) {\n\n           // spr = this.sprite2.spriteFrame.clone(); \n\n            spr = sprf.clone();\n      \n            spr.rect = new Rect(j*80,i*80,80,80);\n        \n            this.spriteN2[i*j] = new Node(\"New Sprite\").addComponent(Sprite);\n       \n            this.node.getParent().addChild(this.spriteN2[i*j].node);\n\n            this.spriteN2[i*j].spriteFrame = spr;\n       \n            this.spriteN2[i*j].node.setPosition(j*80-440, (i*80-280)*-1, 0);\n        \n            this.spriteN2[i*j].addComponent(\"TouchDragger\");\n        \n            }\n        }      \n    }\n\n    draw_grid( row: number, col: number, height: number, width: number){ // Нарисовать сетку\n             //строка,      колонка,     высота,         ширина        \n        let x:number = 0;\n        let y:number = 0;   \n        const g = this.getComponent(Graphics);\n        g.lineWidth = 3;\n        for(let i: number = 0; i < row+1; i++){ // Вертикальные линии\n        g.moveTo(0,y);\n        g.lineTo(width*col,y);\n        y = y + height;\n        }\n        x=0;\n        y=0;\n        for(let i: number = 0; i < col+1; i++){ // Горизонтальные линии\n        g.moveTo(x,0);\n        g.lineTo(x,height*row);\n        x = x + width;\n        }\n        g.stroke();\n    } \n    find_target_pos(){ \n        let x:number = this.width/2; // Центр прямоугольника по ширине\n        let y:number = this.row * this.height - this.height/2; // \"Высота сетки\" - половина по высоте прямоугольника. Начало верхний левый прямоугольник(центр).\n        let a:number = 0; // Спрайты по порядку в массиве this.grid_pos.\n        for(let i = 0; i < this.row*this.col; i++) { // Новая строка\n            if(i%this.col == 0){ // Новая строка \n                if(i>0){ // Со второй строки\n                x = this.width/2; // Начало новой строки по иксу.\n                y = y - this.height; // На строку ниже по игрику.\n                }  \n            }           \n            this.grid_pos[i] = new Vec3(0,0,0); // Инициализация вектора.\n            this.grid_pos[i].x = x; // Целевая позиция в сетке - х\n            this.grid_pos[i].y = y; // Целевая позиция в сетке - у\n            x = x + this.width; // Центр следующего прямоугольника по иксу.\n        } \n    }\n    create_sprites(url:string) { // Создание спрайтов \"pieces\" (загрузка без нарезки)\n        let url2:string = '';  // Пустая строка вспомогательного адреса\n        let m:number = 0; // Математический результат (random)\n       \n        for (let i = 0; i < this.col*this.row; i++) { // Количество колонок сетки на количество строк сетки = количество \"pieces\"\n           // this.angle[i] = 0; // Инициализация массива \"углов\"\n            url2 = url+String(i+1)+'/spriteFrame'; // Конечный адрес\n            resources.load(url2, SpriteFrame, ( error, image ) => { // Загрузка SpriteFrame   \n                this.sprite[i] = new Node(String(i)).addComponent(Sprite); // Новый спрайт\n                this.node.addChild(this.sprite[i].node); // Добавьте дочерний элемент к текущему узлу.\n                this.sprite[i].spriteFrame = image; // \"Текстура\"\n               // this.sprite[i].node.on(Node.EventType.TOUCH_START, (event) => {}, this); // // Регистрация события \"детей\"\n                this.sprite[i].node.setPosition(this.grid_pos[i]); // Установка целевой позиции по this.grid_pos[i]\n                m = math.randomRangeInt(0,360); // Случайное число в диапазоне 0 - 360(целые числа)\n                if(m>0 && m<=90) m = 90; // Выбор одного из 4 значений\n                if(m>90 && m<=180) m = 180;\n                if(m>180 && m<=270) m = 270;\n                if(m>270 && m<=360) m = 0;\n                this.angle[i] = m; // Запись в массив \n                this.sprite[i].node.setRotationFromEuler(0,0,m); // Поворот \"piece\"\n                this.sprite[i].node.on(Node.EventType.TOUCH_START, (event) => {}, this); // // Регистрация события \"детей\"\n                });  \n        } \n    }\n    create_sprites2(url:string) { // Создание спрайтов \"pieces\" (загрузка без нарезки)\n        let url2:string = '';  // Пустая строка вспомогательного адреса\n        for (let i = 0; i < this.col*this.row; i++) { // Количество колонок сетки на количество строк сетки = количество \"pieces\"\n           // this.angle[i] = 0; // Инициализация массива \"углов\" \n            url2 = url+String(i+1)+'/spriteFrame'; // Конечный адрес\n            resources.load(url2, SpriteFrame, ( error, image ) => { // Загрузка SpriteFrame   \n                this.sprite[i] = new Node(String(i)).addComponent(Sprite); // Новый спрайт\n                this.node.addChild(this.sprite[i].node); // Добавьте дочерний элемент к текущему узлу.\n                this.sprite[i].spriteFrame = image; // \"Текстура\"\n                }); \n        }\n        console.log('setTimeout = ' + setTimeout(()=>{this.initS(); this._score(); }, 900)); \n        \n    }\n    initS(){\n        let m:number = 0; // Математический результат (random)\n        for (let i = 0; i < this.col*this.row; i++) {\n        this.sprite[i].node.setPosition(this.grid_pos[i]); // Установка целевой позиции по this.grid_pos[i]\n        m = math.randomRangeInt(0,360); // Случайное число в диапазоне 0 - 360(целые числа)\n        if(m>0 && m<=90) m = 90; // Выбор одного из 4 значений\n        if(m>90 && m<=180) m = 180;\n        if(m>180 && m<=270) m = 270;\n        if(m>270 && m<=360) m = 0;\n        this.angle[i] = m; // Запись в массив \n        this.sprite[i].node.setRotationFromEuler(0,0,m); // Поворот \"piece\"\n        this.sprite[i].node.on(Node.EventType.TOUCH_START, (event) => {}, this); // // Регистрация события \"детей\"\n        }\n    }\n    onTouchStart(event){ // Обработка события (клик по целевой ноде)\n       // event.propagationStopped = true; // Остановка распространения события.\n       // event.preventSwallow = true; // \"События проникающие в сиситему\"\n        let name:number = Number(event.target.name); // Имя(номер по порядку)\"piece\"\n        this.angle[name] = this.angle[name] + 90; // Против часовой стрелки\n        if(this.angle[name] == 360) this.angle[name] = 0; // 360 = 0;\n        this.sprite[name].node.setRotationFromEuler(0,0,this.angle[name]); // Поворот \"piece\"\n        this.game_victory(); // Проверка окончания игры - Победа\n        if (this.scoreX) this.scoreX.string = \"Score \" + this.score;\n       // event.propagationStopped = false; // Отменить остановку распространения события.\n       \n      // this.initS();\n       // this.sprite[30].node.setPosition(650,300,0);\n    }\n   \n    _timer(){ // Таймер\n        this.count--; // Обратный счет;\n        if (this.timer) this.timer.string = \"TIME \" + String(this.count); // Отображение оставшегося времени \n          if(this.count==0){ // Если время истекло\n            this.game_over(); // Конец игры\n            this.unschedule(this._timer); // Остановка таймера\n        }     \n    }\n    _score(){\n        let go:number = 0;\n        for (let i = 0; i < this.col*this.row; i++) { // Количество колонок сетки на количество строк сетки = количество \"pieces\"\n        if(this.angle[i]==0) go++;\n        this.score = go;  \n        }\n        if (this.scoreX) this.scoreX.string = \"Score \" + this.score;\n    }\n    game_victory(){ // Проверка окончания игры\n        this._score();\n        if(this.score == 36){ // Если все углы равны нулю.\n            this.onDestroy();\n            if (this.game_state) this.game_state.string = \"Victory!\";\n            this.unschedule(this._timer); // Остановка таймера\n        } \n    }\n    game_over(){ // Конец игры - неудача\n        this.onDestroy(); // Обнулить слушателей событий\n        if (this.game_state) this.game_state.string = \"Game Over\"; \n    }\n    onDestroy (){\n        this.node.off(Input.EventType.TOUCH_START, this.onTouchStart, this);\n        for (let i = 0; i < this.col*this.row; i++){\n         this.sprite[i].node.off(Node.EventType.TOUCH_START, (event) => {}, this);\n        } \n    }\n    /* update(){\n        this._score();\n    } */\n}"]}