{"version":3,"sources":["file:///D:/ENGINES/Cocos/PROJECTS/103_2/387/ST/Rect/Turn_Rect/assets/resources/scripts/Game_Turn2.ts"],"names":["_decorator","Component","Graphics","Node","Rect","Label","resources","Sprite","SpriteFrame","Vec3","EventTarget","Input","math","eventTarget","ccclass","property","Game","type","sprite3","spriteN2","row","col","height","width","sprite","angle","grid_pos","url","count","score","jsss","onLoad","load","err","image","console","log","cut_out2","start","sprf","spr","i","j","clone","rect","addComponent","node","addChild","spriteFrame","setPosition","sprite_pos","draw_grid","x","y","g","getComponent","lineWidth","moveTo","lineTo","stroke","find_target_pos","a","find_target_pos2","find_target_pos3","create_sprites","url2","m","String","error","randomRangeInt","setRotationFromEuler","on","EventType","TOUCH_START","event","create_sprites2","setTimeout","initS","_score","onTouchStart","name","Number","target","game_victory","scoreX","string","_timer","timer","game_over","unschedule","go","onDestroy","game_state","off"],"mappings":"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","sourcesContent":["import { _decorator, Component, Graphics, Node, Rect, rect, JsonAsset, Scheduler, Label, resources, Sprite, SpriteFrame, Vec2, Vec3, EventTarget,  Event, Input, input, math} from 'cc';\nconst eventTarget = new EventTarget(); \nconst { ccclass, property } = _decorator;\n\n@ccclass('Game')\nexport class Game extends Component {\n\n    @property({type: Label})\n    public scoreX: Label|null = null; // Для вывода\n    \n    @property({type: Label})\n    public timer: Label|null = null; // Для вывода текста \"Game Over\"\n    \n    @property({type: Label})\n    public game_state: Label|null = null; // Для вывода текста \"Game Over\"\n\n   /*  @property(Sprite)\n    sprite2: Sprite = null; */\n\n    protected sprite3: Sprite = new Sprite();\n  \n    protected spriteN2: Sprite[][] = [];\n\n    private row: number = 6; // Количество строк сетки                \n    private col: number = 6; // Количество колонок сетки\n    private height: number = 0; // Высота прямоугольника\n    private width: number = 0; //  Ширина прямоугольника\n\n    private sprite: Sprite[] = []; // Пазлы/Прямоугольники\n    private angle: number[] = []; // Углы на которые повёрнуты соответсвующие прямоугольники\n    private grid_pos: Vec3[] = []; // Сетка конечных позиций Пазлов/Прямоугольников\n\n    private url: string = \"images/\"; // Адрес \"картинок\"\n\n    private count: number = 80; // Таймер\n    private score: number = 0; // this.col * this.row;\n    private jsss:JsonAsset = null;\n    onLoad() {\n      \n       //----------------------------------------------------------------------------------------------------------------\n        resources.load('images/1/spriteFrame', SpriteFrame, (err, image) => {\n\n            if (err) {\n                console.log(err);\n            }\n\n            console.log('image.height = '+ image.height);\n            console.log('image.width = '+ image.width); \n\n            this.cut_out2(image, this.row,this.col);\n         \n        });\n        \n       // this.cut_out2(this.sprite2.spriteFrame, this.row,this.col);\n      \n      \n    }\n    \n    start(){\n       \n      //  console.log('this.sprite2.SpritFreme.height = '+ this.sprite2.spriteFrame.height);\n      //  console.log('this.sprite2.SpritFreme.width = '+ this.sprite2.spriteFrame.width);\n       // setTimeout(()=>{this.sprite_pos(); }, 3000); \n        \n    }\n   \n     /* private row: number = 6; // Количество строк сетки                \n    private col: number = 6; // Количество колонок сетки\n    private height: number = 80; // Высота прямоугольника\n    private width: number = 80; //  Ширина прямоугольника */\n    cut_out2(sprf:SpriteFrame, row: number, col: number){\n\n        let height: number = sprf.height/col;\n        let width: number = sprf.width/row; \n       \n        let spr:SpriteFrame = new SpriteFrame();\n\n        for (let i = 0; i < row; i++) {\n            for (let j = 0; j < col; j++) {\n\n           // spr = this.sprite2.spriteFrame.clone(); \n\n            spr = sprf.clone();\n\n            spr.rect = new Rect(j*width,i*height,width,height);\n\n            this.spriteN2[i] = [];\n        \n            this.spriteN2[i][j] = new Node(\"New Sprite\").addComponent(Sprite);\n       \n           // this.node.getParent().addChild(this.spriteN2[i][j].node);\n            this.node.addChild(this.spriteN2[i][j].node);\n\n            this.spriteN2[i][j].spriteFrame = spr;\n       \n           // this.spriteN2[i][j].node.setPosition(j*width-440, (i*height-280)*-1, 0);\n            this.spriteN2[i][j].node.setPosition(j*(width/2), i*(height/2)*-1, 0);\n\n          //  this.spriteN2[0][0].node.setPosition(100,200, 0);\n         /*  if(i == 0 && j == 1){\n          let a = 0;\n          let b = 0;\n          console.log('this.spriteN2[0][0].node.getPosition() = '+this.spriteN2[a][b].node.getPosition()); } */\n         // console.log('this.spriteN2['+i+']['+j+'].node.getPosition() = '+this.spriteN2[i][j].node.getPosition());\n\n           // this.sprite_pos(this.spriteN2);\n\n           //spriteN[0][0].node.setPosition(100, 280, 0);\n        \n           this.spriteN2[i][j].addComponent(\"TouchDragger\");\n        \n            }\n        }      \n    }\n\n    sprite_pos (){ \n\n        for (let i = 0; i < this.row; i++) {\n            for (let j = 0; j < this.col; j++) {\n\n       // this.spriteN2[i][j].node.setPosition(100, 280, 0); \n            }\n        }\n\n    }\n\n    draw_grid( row: number, col: number, height: number, width: number){ // Нарисовать сетку\n             //строка,      колонка,     высота,         ширина        \n        let x:number = 0;\n        let y:number = 0;   \n        const g = this.getComponent(Graphics);\n        g.lineWidth = 3;\n        for(let i: number = 0; i < row+1; i++){ // Вертикальные линии\n        g.moveTo(0,y);\n        g.lineTo(width*col,y);\n        y = y + height;\n        }\n        x=0;\n        y=0;\n        for(let i: number = 0; i < col+1; i++){ // Горизонтальные линии\n        g.moveTo(x,0);\n        g.lineTo(x,height*row);\n        x = x + width;\n        }\n        g.stroke();\n    } \n    find_target_pos(){ \n        let x:number = this.width/2; // Центр прямоугольника по ширине\n        let y:number = this.row * this.height - this.height/2; // \"Высота сетки\" - половина по высоте прямоугольника. Начало верхний левый прямоугольник(центр).\n        let a:number = 0; // Спрайты по порядку в массиве this.grid_pos.\n        for(let i = 0; i < this.row*this.col; i++) { // Новая строка\n            if(i%this.col == 0){ // Новая строка \n                if(i>0){ // Со второй строки\n                x = this.width/2; // Начало новой строки по иксу.\n                y = y - this.height; // На строку ниже по игрику.\n                }  \n            }           \n            this.grid_pos[i] = new Vec3(0,0,0); // Инициализация вектора.\n            this.grid_pos[i].x = x; // Целевая позиция в сетке - х\n            this.grid_pos[i].y = y; // Целевая позиция в сетке - у\n            x = x + this.width; // Центр следующего прямоугольника по иксу.\n        } \n    }\n    /* private row: number = 6; // Количество строк сетки                \n    private col: number = 6; // Количество колонок сетки\n    private height: number = 80; // Высота прямоугольника\n    private width: number = 80; //  Ширина прямоугольника */\n    find_target_pos2(row:number, col:number, height:number, width:number){ \n        let x:number = this.width/2; // Центр прямоугольника по ширине\n        let y:number = this.row * this.height - this.height/2; // \"Высота сетки\" - половина по высоте прямоугольника. Начало верхний левый прямоугольник(центр).\n        let a:number = 0; // Спрайты по порядку в массиве this.grid_pos.\n        for(let i = 0; i < this.row*this.col; i++) { // Новая строка\n            if(i%this.col == 0){ // Новая строка \n                if(i>0){ // Со второй строки\n                x = this.width/2; // Начало новой строки по иксу.\n                y = y - this.height; // На строку ниже по игрику.\n                }  \n            }           \n            this.grid_pos[i] = new Vec3(0,0,0); // Инициализация вектора.\n            this.grid_pos[i].x = x; // Целевая позиция в сетке - х\n            this.grid_pos[i].y = y; // Целевая позиция в сетке - у\n            x = x + this.width; // Центр следующего прямоугольника по иксу.\n        } \n    }\n    /* private row: number = 6; // Количество строк сетки                \n    private col: number = 6; // Количество колонок сетки\n    private height: number = 80; // Высота прямоугольника\n    private width: number = 80; //  Ширина прямоугольника */\n    find_target_pos3(row:number, col:number, height:number, width:number){ \n        let x:number = this.width/2; // Центр прямоугольника по ширине\n        let y:number = this.row * this.height - this.height/2; // \"Высота сетки\" - половина по высоте прямоугольника. Начало верхний левый прямоугольник(центр).\n        let a:number = 0; // Спрайты по порядку в массиве this.grid_pos.\n        for (let i = 0; i < row; i++) {\n            for (let j = 0; j < col; j++) {\n        //for(let i = 0; i < this.row*this.col; i++) { // Новая строка\n            if(i%this.col == 0){ // Новая строка \n                if(i>0){ // Со второй строки\n                x = this.width/2; // Начало новой строки по иксу.\n                y = y - this.height; // На строку ниже по игрику.\n                }  \n            }           \n            this.grid_pos[i] = new Vec3(0,0,0); // Инициализация вектора.\n            this.grid_pos[i].x = x; // Целевая позиция в сетке - х\n            this.grid_pos[i].y = y; // Целевая позиция в сетке - у\n            x = x + this.width; // Центр следующего прямоугольника по иксу.\n        } \n    }\n    }\n    create_sprites(url:string) { // Создание спрайтов \"pieces\" (загрузка без нарезки)\n        let url2:string = '';  // Пустая строка вспомогательного адреса\n        let m:number = 0; // Математический результат (random)\n       \n        for (let i = 0; i < this.col*this.row; i++) { // Количество колонок сетки на количество строк сетки = количество \"pieces\"\n           // this.angle[i] = 0; // Инициализация массива \"углов\"\n            url2 = url+String(i+1)+'/spriteFrame'; // Конечный адрес\n            resources.load(url2, SpriteFrame, ( error, image ) => { // Загрузка SpriteFrame   \n                this.sprite[i] = new Node(String(i)).addComponent(Sprite); // Новый спрайт\n                this.node.addChild(this.sprite[i].node); // Добавьте дочерний элемент к текущему узлу.\n                this.sprite[i].spriteFrame = image; // \"Текстура\"\n               // this.sprite[i].node.on(Node.EventType.TOUCH_START, (event) => {}, this); // // Регистрация события \"детей\"\n                this.sprite[i].node.setPosition(this.grid_pos[i]); // Установка целевой позиции по this.grid_pos[i]\n                m = math.randomRangeInt(0,360); // Случайное число в диапазоне 0 - 360(целые числа)\n                if(m>0 && m<=90) m = 90; // Выбор одного из 4 значений\n                if(m>90 && m<=180) m = 180;\n                if(m>180 && m<=270) m = 270;\n                if(m>270 && m<=360) m = 0;\n                this.angle[i] = m; // Запись в массив \n                this.sprite[i].node.setRotationFromEuler(0,0,m); // Поворот \"piece\"\n                this.sprite[i].node.on(Node.EventType.TOUCH_START, (event) => {}, this); // // Регистрация события \"детей\"\n                });  \n        } \n    }\n    create_sprites2(url:string) { // Создание спрайтов \"pieces\" (загрузка без нарезки)\n        let url2:string = '';  // Пустая строка вспомогательного адреса\n        for (let i = 0; i < this.col*this.row; i++) { // Количество колонок сетки на количество строк сетки = количество \"pieces\"\n           // this.angle[i] = 0; // Инициализация массива \"углов\" \n            url2 = url+String(i+1)+'/spriteFrame'; // Конечный адрес\n            resources.load(url2, SpriteFrame, ( error, image ) => { // Загрузка SpriteFrame   \n                this.sprite[i] = new Node(String(i)).addComponent(Sprite); // Новый спрайт\n                this.node.addChild(this.sprite[i].node); // Добавьте дочерний элемент к текущему узлу.\n                this.sprite[i].spriteFrame = image; // \"Текстура\"\n                }); \n        }\n        console.log('setTimeout = ' + setTimeout(()=>{this.initS(); this._score(); }, 900)); \n        \n    }\n    initS(){\n        let m:number = 0; // Математический результат (random)\n        for (let i = 0; i < this.col*this.row; i++) {\n        this.sprite[i].node.setPosition(this.grid_pos[i]); // Установка целевой позиции по this.grid_pos[i]\n        m = math.randomRangeInt(0,360); // Случайное число в диапазоне 0 - 360(целые числа)\n        if(m>0 && m<=90) m = 90; // Выбор одного из 4 значений\n        if(m>90 && m<=180) m = 180;\n        if(m>180 && m<=270) m = 270;\n        if(m>270 && m<=360) m = 0;\n        this.angle[i] = m; // Запись в массив \n        this.sprite[i].node.setRotationFromEuler(0,0,m); // Поворот \"piece\"\n        this.sprite[i].node.on(Node.EventType.TOUCH_START, (event) => {}, this); // // Регистрация события \"детей\"\n        }\n    }\n    onTouchStart(event){ // Обработка события (клик по целевой ноде)\n       // event.propagationStopped = true; // Остановка распространения события.\n       // event.preventSwallow = true; // \"События проникающие в сиситему\"\n        let name:number = Number(event.target.name); // Имя(номер по порядку)\"piece\"\n        this.angle[name] = this.angle[name] + 90; // Против часовой стрелки\n        if(this.angle[name] == 360) this.angle[name] = 0; // 360 = 0;\n        this.sprite[name].node.setRotationFromEuler(0,0,this.angle[name]); // Поворот \"piece\"\n        this.game_victory(); // Проверка окончания игры - Победа\n        if (this.scoreX) this.scoreX.string = \"Score \" + this.score;\n       // event.propagationStopped = false; // Отменить остановку распространения события.\n       \n      // this.initS();\n       // this.sprite[30].node.setPosition(650,300,0);\n       //-------------------------------------------------------------------------------------\n       \n    }\n   \n    _timer(){ // Таймер\n        this.count--; // Обратный счет;\n        if (this.timer) this.timer.string = \"TIME \" + String(this.count); // Отображение оставшегося времени \n          if(this.count==0){ // Если время истекло\n            this.game_over(); // Конец игры\n            this.unschedule(this._timer); // Остановка таймера\n        }     \n    }\n    _score(){\n        let go:number = 0;\n        for (let i = 0; i < this.col*this.row; i++) { // Количество колонок сетки на количество строк сетки = количество \"pieces\"\n        if(this.angle[i]==0) go++;\n        this.score = go;  \n        }\n        if (this.scoreX) this.scoreX.string = \"Score \" + this.score;\n    }\n    game_victory(){ // Проверка окончания игры\n        this._score();\n        if(this.score == 36){ // Если все углы равны нулю.\n            this.onDestroy();\n            if (this.game_state) this.game_state.string = \"Victory!\";\n            this.unschedule(this._timer); // Остановка таймера\n        } \n    }\n    game_over(){ // Конец игры - неудача\n        this.onDestroy(); // Обнулить слушателей событий\n        if (this.game_state) this.game_state.string = \"Game Over\"; \n    }\n    onDestroy (){\n        this.node.off(Input.EventType.TOUCH_START, this.onTouchStart, this);\n        for (let i = 0; i < this.col*this.row; i++){\n         this.sprite[i].node.off(Node.EventType.TOUCH_START, (event) => {}, this);\n        } \n    }\n    /* update(){\n        this.cut_out2(this.sprite3.spriteFrame,this.row,this.col);\n    } */\n}"]}